<?xml version="1.0" encoding="UTF-8"?> 
 <!DOCTYPE sqlMap PUBLIC "//iBATIS.com//DTD SQL Map 2.0//EN" "HTTP://ibatis.apache.org/dtd/sql-map-2.dtd" >
<sqlMap namespace="Cfg">
	<typeAlias alias="CfgVO" type="pmcg.imti.domain.CfgVO" />


	<resultMap id="mapComplexQuerySimple" class="CfgVO">
		<result property="idcfg" column="idcfg" />
		<result property="paramcfg" column="paramcfg" />
		<result property="valorcfg" column="valorcfg" />
		<result property="desccfg" column="desccfg" />
	</resultMap>

	<resultMap id="mapComplexQuery" class="CfgVO">
		<result property="idcfg" column="idcfg" />
		<result property="paramcfg" column="paramcfg" />
		<result property="valorcfg" column="valorcfg" />
		<result property="desccfg" column="desccfg" />
	</resultMap>

	<select id="getRegByCod" parameterClass="Integer" resultMap="mapComplexQuerySimple">
		SELECT * FROM NFSE.CONFIGCFG WHERE idcfg = #value:NUMERIC#
	</select>

	<select id="getRegByCodComplex" parameterClass="Integer"
		resultMap="mapComplexQuery">
		SELECT * FROM NFSE.CONFIGCFG WHERE idcfg = #value:NUMERIC#
	</select>

	<select id="getRegByCriterio" parameterClass="CfgVO"
		resultMap="mapComplexQuerySimple">
		SELECT * FROM NFSE.CONFIGCFG
		<dynamic prepend=" WHERE ">
			<isNotNull property="idcfg" prepend=" AND ">
				idcfg = #idcfg:NUMERIC#
			</isNotNull>
			<isNotNull property="paramcfg" prepend=" AND ">
				UPPER(paramcfg) LIKE '%' || UPPER(#paramcfg:VARCHAR#) || '%'
			</isNotNull>
			<isNotNull property="valorcfg" prepend=" AND ">
				UPPER(valorcfg) LIKE '%' || UPPER(#valorcfg:VARCHAR#) || '%'
			</isNotNull>
			<isNotNull property="desccfg" prepend=" AND ">
				UPPER(desccfg) LIKE '%' || UPPER(#desccfg:VARCHAR#) || '%'
			</isNotNull>
		</dynamic>
	</select>

	<select id="getRegByCriterioComplex" parameterClass="CfgVO"
		resultMap="mapComplexQuery">
		SELECT * FROM NFSE.CONFIGCFG
		<dynamic prepend=" WHERE ">
			<isNotNull property="idcfg" prepend=" AND "> idcfg =
				#idcfg:NUMERIC#
			</isNotNull>
			<isNotNull property="paramcfg" prepend=" AND ">
				UPPER(paramcfg) LIKE '%' || UPPER(#paramcfg:VARCHAR#) || '%'
			</isNotNull>
			<isNotNull property="valorcfg" prepend=" AND ">
				UPPER(valorcfg) LIKE '%' || UPPER(#valorcfg:VARCHAR#) || '%'
			</isNotNull>
			<isNotNull property="desccfg" prepend=" AND ">
				UPPER(desccfg) LIKE '%' || UPPER(#desccfg:VARCHAR#) || '%'
			</isNotNull>
		</dynamic>
	</select>

	<select id="getTodos" resultMap="mapComplexQuerySimple">
		SELECT * FROM NFSE.CONFIGCFG
	</select>

	<insert id="insReg" parameterClass="CfgVO">
		INSERT INTO NFSE.CONFIGCFG(idcfg,paramcfg,valorcfg,desccfg) VALUES
		(#idcfg:NUMERIC#, UPPER(#paramcfg:VARCHAR#),
		UPPER(#valorcfg:VARCHAR#), UPPER(#desccfg:VARCHAR#) )
	</insert>

	<update id="updRegByCod" parameterClass="CfgVO">
		UPDATE NFSE.CONFIGCFG SET paramcfg= UPPER(#paramcfg:VARCHAR#),valorcfg=
		UPPER(#valorcfg:VARCHAR#),desccfg= UPPER(#desccfg:VARCHAR#) WHERE
		idcfg = #idcfg:NUMERIC#
	</update>
	<delete id="delByCod" parameterClass="Integer">
		DELETE FROM NFSE.CONFIGCFG WHERE idcfg = #value:NUMERIC#
	</delete>
	<delete id="delByCodigos" parameterClass="String">
		DELETE FROM NFSE.CONFIGCFG WHERE idcfg in ($value$)
	</delete>

	<select id="getCountByCriterio" parameterClass="CfgVO"
		resultClass="Integer">
		SELECT count(idcfg) FROM NFSE.CONFIGCFG
		<dynamic prepend=" WHERE ">
			<isNotNull property="idcfg" prepend=" AND "> idcfg =
				#idcfg:NUMERIC#
			</isNotNull>
			<isNotNull property="paramcfg" prepend=" AND ">
				UPPER(paramcfg) LIKE '%' || UPPER(#paramcfg:VARCHAR#) || '%'
			</isNotNull>
			<isNotNull property="valorcfg" prepend=" AND ">
				UPPER(valorcfg) LIKE '%' || UPPER(#valorcfg:VARCHAR#) || '%'
			</isNotNull>
			<isNotNull property="desccfg" prepend=" AND ">
				UPPER(desccfg) LIKE '%' || UPPER(#desccfg:VARCHAR#) || '%'
			</isNotNull>
		</dynamic>
	</select>
	
	<select id="getValorByParam" parameterClass="String" resultClass="String">
		select VALORCFG from NFSE.CONFIGCFG 
		WHERE PARAMCFG LIKE #value:NUMERIC#
	</select>
</sqlMap> 
 