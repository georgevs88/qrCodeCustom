<?xml version="1.0" encoding="UTF-8"?> 
 <!DOCTYPE sqlMap PUBLIC "//iBATIS.com//DTD SQL Map 2.0//EN" "HTTP://ibatis.apache.org/dtd/sql-map-2.dtd" >
<sqlMap namespace="Vev">
	<typeAlias alias="VevVO" type="pmcg.fcn.domain.VevVO" />


	<resultMap id="mapComplexQuerySimple" class="VevVO">
		<result property="iddvev" column="iddvev" />
		<result property="viavev" column="viavev" />
		<result property="evevev" column="evevev" />
	</resultMap>

	<resultMap id="mapComplexQuery" class="VevVO">
		<result property="iddvev" column="iddvev" />
		<result property="viavev" column="viavev" />
		<result property="evevev" column="evevev" />
	</resultMap>

	<select id="getRegByCod" parameterClass="Long" resultMap="mapComplexQuerySimple">
		SELECT * FROM fcn.fcnvev WHERE iddvev = #value:NUMERIC#
	</select>

	<select id="getRegByCodComplex" parameterClass="Long" resultMap="mapComplexQuery">
		SELECT * FROM fcn.fcnvev WHERE iddvev = #value:NUMERIC#
	</select>

	<select id="getRegByCriterio" parameterClass="VevVO"
		resultMap="mapComplexQuerySimple">
		SELECT * FROM fcn.fcnvev
		<dynamic prepend=" WHERE ">
			<isNotNull property="iddvev" prepend=" AND ">
				iddvev = #iddvev:NUMERIC#
			</isNotNull>
			<isNotNull property="viavev" prepend=" AND ">
				viavev = #viavev:NUMERIC#
			</isNotNull>
			<isNotNull property="evevev" prepend=" AND ">
				evevev ILIKE '%' || #evevev:VARCHAR# || '%'
			</isNotNull>
		</dynamic>
	</select>

	<select id="getRegByCriterioComplex" parameterClass="VevVO"
		resultMap="mapComplexQuery">
		SELECT * FROM fcn.fcnvev
		<dynamic prepend=" WHERE ">
			<isNotNull property="iddvev" prepend=" AND "> iddvev =
				#iddvev:NUMERIC#
			</isNotNull>
			<isNotNull property="viavev" prepend=" AND "> viavev =
				#viavev:NUMERIC#
			</isNotNull>
			<isNotNull property="evevev" prepend=" AND ">
				evevev ILIKE '%' || #evevev:VARCHAR# || '%'
			</isNotNull>
		</dynamic>
	</select>

	<select id="getTodos" resultMap="mapComplexQuerySimple">
		SELECT * FROM fcn.fcnvev
	</select>

	<insert id="insReg" parameterClass="VevVO">
		<selectKey keyProperty="iddvev" resultClass="Long">
			SELECT NEXTVAL('fcn.seqvev')
		</selectKey>
		INSERT INTO fcn.fcnvev(iddvev,viavev,evevev) VALUES
		(#iddvev:NUMERIC#,#viavev:NUMERIC#, UPPER(#evevev:VARCHAR#))
	</insert>

	<update id="updRegByCod" parameterClass="VevVO">
		UPDATE fcn.fcnvev SET viavev= #viavev:NUMERIC#,evevev= UPPER(#evevev:VARCHAR#)
		WHERE iddvev = #iddvev:NUMERIC#
	</update>
	<delete id="delByCod" parameterClass="Long">
		DELETE FROM fcn.fcnvev WHERE iddvev = #value:NUMERIC#
	</delete>
	<delete id="delByCodigos" parameterClass="String">
		DELETE FROM fcn.fcnvev WHERE iddvev in ($value$)
	</delete>

	<select id="getCountByCriterio" parameterClass="VevVO"
		resultClass="Integer">
		SELECT count(iddvev) FROM fcn.fcnvev
		<dynamic prepend=" WHERE ">
			<isNotNull property="iddvev" prepend=" AND "> iddvev =
				#iddvev:NUMERIC#
			</isNotNull>
			<isNotNull property="viavev" prepend=" AND "> viavev =
				#viavev:NUMERIC#
			</isNotNull>
			<isNotNull property="evevev" prepend=" AND ">
				evevev ILIKE '%' || #evevev:VARCHAR# || '%'
			</isNotNull>
		</dynamic>
	</select>
</sqlMap> 
 