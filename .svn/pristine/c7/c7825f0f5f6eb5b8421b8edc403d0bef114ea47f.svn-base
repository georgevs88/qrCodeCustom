package pmcg.imti.view;

import java.sql.SQLException;
import java.util.HashMap;
import java.util.List;

import org.zkoss.zk.ui.WrongValueException;

import pmcg.framework.ui.WindowCrud;
import pmcg.imti.dao.ibatis.EcoDAO;
import pmcg.imti.util.FormatUtils;

public class Liccad extends WindowCrud{
	private static final long serialVersionUID = 1L;
	public List<HashMap<String, Object>> listEcolic;
	public List<HashMap<String, Object>> listEcolichis;
	public String insmun;
	
	public void initComponentes() throws SQLException{
		getCrdBar().getBotao(0).setVisible(false);
		getCrdBar().getBotao(1).setVisible(false);
		getCrdBar().getBotao(2).setVisible(false);
		getCrdBar().getBotao(3).setVisible(true);
		getCrdBar().getBotao(4).setVisible(false);
		getCrdBar().getBotao(5).setVisible(false);
//		insmun = "00000652008";
//		pesquisar();
		vincular();
	}
	
	
	@Override
	public void salvar() throws InterruptedException {
		
	}
	
	public void pesquisar() {
		if(insmun == null || insmun.trim().isEmpty()){
			throw new WrongValueException(getComponente("insmun"),"Informe a Inscrição Municipal!");
		}
		listEcolic = new EcoDAO().getEcolic(FormatUtils.onlyNumbers(insmun));
		listEcolichis = new EcoDAO().getEcolichis(FormatUtils.onlyNumbers(insmun));
		vincular();
	}
	
		
	@Override
	public void incluir() throws InterruptedException {
	
	}
	
	@Override
	public void apagar() throws InterruptedException {
	
	}

	@Override
	public void limpar() throws InterruptedException {
		insmun = "";
		listEcolic = null;
		listEcolichis = null;
		vincular();
	}

	@Override
	public void imprimir() throws InterruptedException {
	}

	@Override
	public void sair() throws InterruptedException {
		detach();
	}
	
}
