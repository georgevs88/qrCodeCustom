<?xml version="1.0" encoding="UTF-8"?> 
 <!DOCTYPE sqlMap PUBLIC "//iBATIS.com//DTD SQL Map 2.0//EN" "HTTP://ibatis.apache.org/dtd/sql-map-2.dtd" >
<sqlMap namespace="Req">
	<typeAlias alias="ReqVO" type="pmcg.fcn.domain.ReqVO" />


	<resultMap id="mapComplexQuerySimple" class="ReqVO">
		<result property="iddreq" column="iddreq" />
		<result property="tipreq" column="tipreq" />
		<result property="cpfreq" column="cpfreq" />
		<result property="logreq" column="logreq" />
		<result property="ddcreq" column="ddcreq" />
		<result property="celreq" column="celreq" />
		<result property="nomreq" column="nomreq" />
		<result property="emareq" column="emareq" />
		<result property="dddreq" column="dddreq" />
		<result property="telreq" column="telreq" />
	</resultMap>

	<resultMap id="mapComplexQuery" class="ReqVO">
		<result property="iddreq" column="iddreq" />
		<result property="tipreq" column="tipreq" />
		<result property="cpfreq" column="cpfreq" />
		<result property="logreq" column="logreq" />
		<result property="ddcreq" column="ddcreq" />
		<result property="celreq" column="celreq" />
		<result property="nomreq" column="nomreq" />
		<result property="emareq" column="emareq" />
		<result property="dddreq" column="dddreq" />
		<result property="telreq" column="telreq" />
	</resultMap>

	<select id="getRegByCod" parameterClass="Long" resultMap="mapComplexQuerySimple">
		SELECT * FROM fcn.fcnreq WHERE iddreq = #value:NUMERIC#
	</select>

	<select id="getRegByCodComplex" parameterClass="Long" resultMap="mapComplexQuery">
		SELECT * FROM fcn.fcnreq WHERE iddreq = #value:NUMERIC#
	</select>

	<select id="getRegByCriterio" parameterClass="ReqVO"
		resultMap="mapComplexQuerySimple">
		SELECT * FROM fcn.fcnreq
		<dynamic prepend=" WHERE ">
			<isNotNull property="iddreq" prepend=" AND ">
				iddreq = #iddreq:NUMERIC#
			</isNotNull>
			<isNotNull property="tipreq" prepend=" AND ">
				tipreq ILIKE '%' || #tipreq:VARCHAR# || '%'
			</isNotNull>
			<isNotNull property="cpfreq" prepend=" AND ">
				cpfreq ILIKE '%' || #cpfreq:VARCHAR# || '%'
			</isNotNull>
			<isNotNull property="logreq" prepend=" AND ">
				logreq ILIKE '%' || #logreq:VARCHAR# || '%'
			</isNotNull>
			<isNotNull property="ddcreq" prepend=" AND ">
				ddcreq ILIKE '%' || #ddcreq:VARCHAR# || '%'
			</isNotNull>
			<isNotNull property="celreq" prepend=" AND ">
				celreq ILIKE '%' || #celreq:VARCHAR# || '%'
			</isNotNull>
			<isNotNull property="nomreq" prepend=" AND ">
				nomreq ILIKE '%' || #nomreq:VARCHAR# || '%'
			</isNotNull>
			<isNotNull property="emareq" prepend=" AND ">
				emareq ILIKE '%' || #emareq:VARCHAR# || '%'
			</isNotNull>
			<isNotNull property="dddreq" prepend=" AND ">
				dddreq ILIKE '%' || #dddreq:VARCHAR# || '%'
			</isNotNull>
			<isNotNull property="telreq" prepend=" AND ">
				telreq ILIKE '%' || #telreq:VARCHAR# || '%'
			</isNotNull>
		</dynamic>
	</select>

	<select id="getRegByCriterioComplex" parameterClass="ReqVO"
		resultMap="mapComplexQuery">
		SELECT * FROM fcn.fcnreq
		<dynamic prepend=" WHERE ">
			<isNotNull property="iddreq" prepend=" AND "> iddreq =
				#iddreq:NUMERIC#
			</isNotNull>
			<isNotNull property="tipreq" prepend=" AND ">
				tipreq ILIKE '%' || #tipreq:VARCHAR# || '%'
			</isNotNull>
			<isNotNull property="cpfreq" prepend=" AND ">
				cpfreq ILIKE '%' || #cpfreq:VARCHAR# || '%'
			</isNotNull>
			<isNotNull property="logreq" prepend=" AND ">
				logreq ILIKE '%' || #logreq:VARCHAR# || '%'
			</isNotNull>
			<isNotNull property="ddcreq" prepend=" AND ">
				ddcreq ILIKE '%' || #ddcreq:VARCHAR# || '%'
			</isNotNull>
			<isNotNull property="celreq" prepend=" AND ">
				celreq ILIKE '%' || #celreq:VARCHAR# || '%'
			</isNotNull>
			<isNotNull property="nomreq" prepend=" AND ">
				nomreq ILIKE '%' || #nomreq:VARCHAR# || '%'
			</isNotNull>
			<isNotNull property="emareq" prepend=" AND ">
				emareq ILIKE '%' || #emareq:VARCHAR# || '%'
			</isNotNull>
			<isNotNull property="dddreq" prepend=" AND ">
				dddreq ILIKE '%' || #dddreq:VARCHAR# || '%'
			</isNotNull>
			<isNotNull property="telreq" prepend=" AND ">
				telreq ILIKE '%' || #telreq:VARCHAR# || '%'
			</isNotNull>
		</dynamic>
	</select>

	<select id="getTodos" resultMap="mapComplexQuerySimple">
		SELECT * FROM fcn.fcnreq
	</select>

	<insert id="insReg" parameterClass="ReqVO">
		<selectKey keyProperty="iddreq" resultClass="Long">
			SELECT NEXTVAL('fcn.seqreq')
		</selectKey>
		INSERT INTO
		fcn.fcnreq(iddreq,tipreq,cpfreq,logreq,ddcreq,celreq,nomreq,emareq,dddreq,telreq)
		VALUES (#iddreq:NUMERIC#, UPPER(#tipreq:VARCHAR#),
		UPPER(#cpfreq:VARCHAR#), UPPER(#logreq:VARCHAR#),
		UPPER(#ddcreq:VARCHAR#), UPPER(#celreq:VARCHAR#),
		UPPER(#nomreq:VARCHAR#), #emareq:VARCHAR#,
		UPPER(#dddreq:VARCHAR#), UPPER(#telreq:VARCHAR#) )
	</insert>

	<update id="updRegByCod" parameterClass="ReqVO">
		UPDATE fcn.fcnreq SET tipreq= UPPER(#tipreq:VARCHAR#),cpfreq=
		UPPER(#cpfreq:VARCHAR#),logreq= UPPER(#logreq:VARCHAR#),ddcreq=
		UPPER(#ddcreq:VARCHAR#),celreq= UPPER(#celreq:VARCHAR#),nomreq=
		UPPER(#nomreq:VARCHAR#),emareq= #emareq:VARCHAR#,dddreq=
		UPPER(#dddreq:VARCHAR#),telreq= UPPER(#telreq:VARCHAR#) WHERE iddreq =
		#iddreq:NUMERIC#
	</update>
	<delete id="delByCod" parameterClass="Long">
		DELETE FROM fcn.fcnreq WHERE iddreq = #value:NUMERIC#
	</delete>
	<delete id="delByCodigos" parameterClass="String">
		DELETE FROM fcn.fcnreq WHERE iddreq in ($value$)
	</delete>

	<select id="getCountByCriterio" parameterClass="ReqVO"
		resultClass="Integer">
		SELECT count(iddreq) FROM fcn.fcnreq
		<dynamic prepend=" WHERE ">
			<isNotNull property="iddreq" prepend=" AND "> iddreq =
				#iddreq:NUMERIC#
			</isNotNull>
			<isNotNull property="tipreq" prepend=" AND ">
				tipreq ILIKE '%' || #tipreq:VARCHAR# || '%'
			</isNotNull>
			<isNotNull property="cpfreq" prepend=" AND ">
				cpfreq ILIKE '%' || #cpfreq:VARCHAR# || '%'
			</isNotNull>
			<isNotNull property="logreq" prepend=" AND ">
				logreq ILIKE '%' || #logreq:VARCHAR# || '%'
			</isNotNull>
			<isNotNull property="ddcreq" prepend=" AND ">
				ddcreq ILIKE '%' || #ddcreq:VARCHAR# || '%'
			</isNotNull>
			<isNotNull property="celreq" prepend=" AND ">
				celreq ILIKE '%' || #celreq:VARCHAR# || '%'
			</isNotNull>
			<isNotNull property="nomreq" prepend=" AND ">
				nomreq ILIKE '%' || #nomreq:VARCHAR# || '%'
			</isNotNull>
			<isNotNull property="emareq" prepend=" AND ">
				emareq ILIKE '%' || #emareq:VARCHAR# || '%'
			</isNotNull>
			<isNotNull property="dddreq" prepend=" AND ">
				dddreq ILIKE '%' || #dddreq:VARCHAR# || '%'
			</isNotNull>
			<isNotNull property="telreq" prepend=" AND ">
				telreq ILIKE '%' || #telreq:VARCHAR# || '%'
			</isNotNull>
		</dynamic>
	</select>
</sqlMap> 
 