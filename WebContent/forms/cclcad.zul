<?page id="testZul" title="Atualização de Riscos - CNAE" cacheable="false" 
	language="xul/html" zscriptLanguage="Java" contentType="text/html;charset=UTF-8"?>

<zk xmlns="http://www.zkoss.org/2005/zul"
	xmlns:h="http://www.w3.org/1999/xhtml"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://www.zkoss.org/2005/zul http://www.zkoss.org/2005/zul/zul.xsd">
	<window use="pmcg.imti.view.Cclcad" id="ccl" title="Atualização de Riscos - CNAE" border="normal" shadow="false" width="800px"
		height="640px" position="center" mode="overlapped" sizable="false" closable="false" onCreate="ccl.initComponentes()">
		<separator height="7px"/>
		<div style="background-color:#dcdcdc" height="66px">
			<vbox>
				<separator height="1px"/>
				<hbox>
					<separator width="20px"/>
					<vbox>
						<separator height="1px"/>
						<label value="UNIDADE:" style="font-weight:bold"/>
					</vbox>
					<combobox id="cbUni" readonly="true" width="160px" selectedItem="@{ccl.coduni}" style="text-align:center;font-weight:bold;" onChange="ccl.filtrar()">
						<comboitem value="24" label="MEIO AMBIENTE" />
						<comboitem value="2" label="VIGILÂNCIA SANITÁRIA" />
						<comboitem value="26" label="BOMBEIROS" />
					</combobox>
				</hbox>
				<hbox>
					<separator width="20px"/>
					<vbox>
						<separator height="1px"/>
						<label value="CNAE:" style="font-weight:bold"/>
					</vbox>
					<textbox value="@{ccl.filtro.cnaecdcna}" width="120px" onOK="ccl.filtrar()"/>
					<vbox>
						<separator height="1px"/>
						<label value="Descrição:" style="font-weight:bold"/>
					</vbox>
					<textbox value="@{ccl.filtro.cnaenmcna}" width="340px" onOK="ccl.filtrar()" style="text-transform:uppercase"/>
					<button label="Filtrar" width="120px" image="/images/externo/funnel.png" style="border:1px solid #3083BA;background:white" onClick="ccl.filtrar()"/>
				</hbox>
			</vbox>
		</div>
		<separator height="7px"/>
		<hbox>
			<separator width="3px"/>
			<tabbox height="580px" width="770px">
				<tabs id="tabs">
					<tab id="tNA" label="Não Alterados" />
					<tab id="tA" label="Alterados" />
				</tabs>
				<tabpanels>
					<tabpanel>
						<paging id="pagNA" pageSize="50" />
						<listbox model="@{ccl.listNAlt}" width="770px" height="217px" 
						selectedItem="@{ccl.selNA}" onSelect="ccl.selecionar()">
							<listhead>
								<listheader width="33px">
									<checkbox onCheck="ccl.selTodosNA()" checked="@{ccl.checkTodosNA}"/>
								</listheader>
								<listheader width="100px">CNAE</listheader>
								<listheader width="500px">
									<hbox>
										<label value="Descrição"/> 
										<separator width="5px"/> 
										<label value="(Clique no item para obter a descrição completa)" style="font-size:9px"/>
								</hbox></listheader>
								<listheader width="120px" align="center">RISCO</listheader>
							</listhead>
							<listitem self="@{each=c}" style="@{c.style}">
								<listcell>
									<checkbox checked="@{c.checkbox}"/>
								</listcell>
								<listcell label="@{c.cnaecdcna}" />
								<listcell label="@{c.descres}" />
								<listcell label="@{c.descrisco}" />
							</listitem>
						</listbox>
						<separator bar="true" height="20px"/>
						<grid height="350px">
							<columns>
								<column label="" align="right" width="80px" />
								<column label="" align="left" />
							</columns>
							<rows>
								<row>
									<label value="CNAE: " />
									<textbox id="cnaena" value="@{ccl.selecionadoNA.cnaecdcna}" readonly="true" width="120px" />
								</row>
								<row>
									<label value="Descrição: " />
									<textbox id="descna" value="@{ccl.selecionadoNA.cnaenmcna}" width="680px" rows="3" readonly="true" style="text-transform:uppercase"/>
								</row>
								<row>
									<hbox>
										<label value="*" style="color:red;font-weight:bold" />
										<label value="Risco:" />
									</hbox>
									<combobox id="cbna" width="120px" readonly="true" selectedItem="@{ccl.riscoNA}">
										<comboitem value="B" label='BAIXO' />
										<comboitem value="M" label='MÉDIO' />
										<comboitem value="A" label='ALTO' />
									</combobox>
								</row>
								<row spans="2" width="300px">
									<div align="center">
										<button label="Salvar" onClick="ccl.salvar()" width="150px" height="30px" image="/images/externo/btnSalvar.png" style="border:1px solid #3083BA;background:none"/>
									</div>
								</row>
							</rows>
						</grid>
					</tabpanel>
					<tabpanel>
						<paging id="pagA" pageSize="50" />
						<listbox model="@{ccl.listAlt}" width="770px" height="217px" 
							selectedItem="@{ccl.selA}" onSelect="ccl.selecionar()">
							<listhead>
								<listheader width="33px">
									<checkbox onCheck="ccl.selTodosA()" checked="@{ccl.checkTodosA}"/>
								</listheader>
								<listheader width="100px">CNAE</listheader>
								<listheader width="500px">Descrição</listheader>
								<listheader width="120px" align="center">RISCO</listheader>
							</listhead>
							<listitem self="@{each=l}" style="@{l.style}">
								<listcell>
									<checkbox checked="@{l.checkbox}"/>
								</listcell>
								<listcell label="@{l.cnaecdcna}" />
								<listcell label="@{l.descres}" />
								<listcell label="@{l.descrisco}" />
							</listitem>
						</listbox>
						<separator bar="true" height="20px"/>
						<grid height="350px">
							<columns>
								<column label="" align="right" width="80px" />
								<column label="" align="left" />
							</columns>
							<rows>
								<row>
									<label value="CNAE: " />
									<textbox id="cnaea" value="@{ccl.selecionadoA.cnaecdcna}" readonly="true" width="120px" />
								</row>
								<row>
									<label value="Descrição: " />
									<textbox id="desca" value="@{ccl.selecionadoA.cnaenmcna}" width="680px" rows="3" readonly="true" style="text-transform:uppercase"/>
								</row>
								<row>
									<hbox>
										<label value="*" style="color:red;font-weight:bold" />
										<label value="Risco:" />
									</hbox>
									<combobox id="cba" width="120px" readonly="true" selectedItem="@{ccl.riscoA}">
										<comboitem value="B" label='BAIXO' />
										<comboitem value="M" label='MÉDIO' />
										<comboitem value="A" label='ALTO' />
									</combobox>
								</row>
								<row spans="2" width="300px">
									<div align="center">
										<button label="Salvar" onClick="ccl.salvar()" width="150px" height="30px" image="/images/externo/btnSalvar.png" style="border:1px solid #3083BA;background:none"/>
									</div>
								</row>
							</rows>
						</grid>
					</tabpanel>
				</tabpanels>
			</tabbox>
		</hbox>
	</window>
</zk>